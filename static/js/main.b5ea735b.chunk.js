(this.webpackJsonpmemo=this.webpackJsonpmemo||[]).push([[0],{33:function(e,t,n){e.exports=n(59)},34:function(e,t,n){},35:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);n(34),n(35);var r,a=n(1),c=n.n(a),o=n(16),u=n.n(o),E=n(12),s=n(30);function i(e){var t=e.dispatch,n=e.onAdd,c=e.onSave;!function(e){var t=e.onKeyDown;Object(a.useEffect)((function(){var e=document.body;function n(n){n.target===e&&t(n)}return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}),[t])}({onKeyDown:Object(a.useCallback)((function(e){if(e.code===r.KEY_A)n();else if(e.code===r.BACKSPACE);else if(e.code===r.ESCAPE);else{if(!e.ctrlKey&&!e.metaKey||e.code!==r.KEY_S)return;c()}e.preventDefault()}),[t,n,c])})}!function(e){e.BACKSPACE="Backspace",e.ENTER="Enter",e.ESCAPE="Escape",e.KEY_A="KeyA",e.KEY_D="KeyD",e.KEY_R="KeyR",e.KEY_S="KeyS",e.KEY_W="KeyW"}(r||(r={}));var S,_=E.c;!function(e){e.USER_LOGIN_REQUEST="USER_LOGIN_REQUEST",e.USER_LOGIN_SUCCESS="USER_LOGIN_SUCCESS",e.USER_LOGOUT_REQUEST="USER_LOGOUT_REQUEST",e.USER_LOGOUT_SUCCESS="USER_LOGOUT_SUCCESS",e.NOTE_GET_ALL_REQUEST="NOTE_GET_ALL_REQUEST",e.NOTE_GET_ALL_SUCCESS="NOTE_GET_ALL_SUCCESS",e.NOTE_ADD_REQUEST="NOTE_ADD_REQUEST",e.NOTE_ADD_SUCCESS="NOTE_ADD_SUCCESS",e.NOTE_REMOVE="NOTE_REMOVE"}(S||(S={}));var O={NOTE_ADD_REQUEST:function(e){return{type:S.NOTE_ADD_REQUEST,payload:{text:e}}},NOTE_ADD_SUCCESS:function(e){return{type:S.NOTE_ADD_SUCCESS,payload:{note:e}}},NOTE_REMOVE:function(){return{type:S.NOTE_REMOVE}},USER_LOGIN_REQUEST:function(){return{type:S.USER_LOGIN_REQUEST}},USER_LOGIN_SUCCESS:function(e){return{type:S.USER_LOGIN_SUCCESS,payload:{user:e}}},USER_LOGOUT_REQUEST:function(){return{type:S.USER_LOGOUT_REQUEST}},USER_LOGOUT_SUCCESS:function(){return{type:S.USER_LOGOUT_SUCCESS}},NOTE_GET_ALL_REQUEST:function(){return{type:S.NOTE_GET_ALL_REQUEST}},NOTE_GET_ALL_SUCCESS:function(e){return{type:S.NOTE_GET_ALL_SUCCESS,payload:{notes:e}}}},l={user:function(e){return e.user},notes:function(e){return e.notes}};function f(){}var p=n(18),d=n.n(p),b=function(e){var t=e.className,n=e.children,r=e.disabled,a=e.onClick;return c.a.createElement("button",{className:d()("Button",t),disabled:r,onClick:a},n)},U=n(32),T=function(e){var t=e.className,n=e.children,r=Object(U.a)(e,["className","children"]);return c.a.createElement("input",Object.assign({},r,{className:d()("TextInput",t)}),n)},m=function(e){var t=e.children;return c.a.createElement("div",{className:"AppLayout"},c.a.createElement("header",{className:"AppLayout__header"},"Memo"),c.a.createElement("main",{className:"AppLayout__content"},t))},C=function(){var e=Object(E.b)(),t=_(l.user),n=_(l.notes),r=Object(a.useCallback)((function(){e(O.USER_LOGIN_REQUEST())}),[e]),o=Object(a.useCallback)((function(t){e(O.NOTE_ADD_REQUEST(t))}),[e]);return i({dispatch:e,onAdd:f,onSave:f}),null===t?c.a.createElement(m,null,c.a.createElement(b,{onClick:r},"Login")):c.a.createElement(m,null,c.a.createElement("p",null,t.displayName?"Hello, ".concat(t.id,"!"):"Hello"),c.a.createElement(v,{notes:n}),c.a.createElement(N,{onSubmit:o}))},N=function(e){var t=e.onSubmit,n=Object(a.useState)(""),r=Object(s.a)(n,2),o=r[0],u=r[1],E=Object(a.useCallback)((function(e){var t=e.currentTarget.value;u(t)}),[]),i=Object(a.useCallback)((function(){t(o),u("")}),[o,t]),S=""===o;return c.a.createElement("div",null,c.a.createElement(T,{value:o,onChange:E}),c.a.createElement(b,{className:"HomePage__note-add",disabled:S,onClick:i},"Add"))},v=function(e){var t=e.notes;return c.a.createElement("div",{className:"NoteList"},t.map((function(e){return c.a.createElement(R,{key:e.id,note:e})})))},R=function(e){var t=e.note,n=Object(a.useMemo)((function(){return function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate(),c=t.getHours(),o=t.getMinutes();return"".concat(n,"-").concat(L(r),"-").concat(L(a)," ").concat(L(c),":").concat(L(o))}(t.createdAt)}),[t]);return c.a.createElement("div",{className:"NoteView"},c.a.createElement("p",{className:"NoteView-text"},t.text),c.a.createElement("p",{className:"NoteView-created-at"},n))};function L(e){return e<10?"0".concat(e):"".concat(e)}var j,y=n(10),h=n(19),A=n(31),D=n(13);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(D.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return t};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,c=t[a.type];return void 0!==c?c(r,a):n(r,a)}}({user:null,notes:[]},(j={},Object(D.a)(j,S.USER_LOGIN_SUCCESS,(function(e,t){return G({},e,{user:t.payload.user})})),Object(D.a)(j,S.USER_LOGOUT_SUCCESS,(function(e){return G({},e,{user:null})})),Object(D.a)(j,S.NOTE_GET_ALL_SUCCESS,(function(e,t){return G({},e,{notes:t.payload.notes})})),Object(D.a)(j,S.NOTE_ADD_SUCCESS,(function(e,t){var n=t.payload.note;return G({},e,{notes:[].concat(Object(A.a)(e.notes),[n])})})),j)),w=n(7),k=n.n(w),Q=n(5),I=n(22),K=n.n(I);n(45),n(47);K.a.initializeApp({apiKey:"AIzaSyA1gaf9xQvqM7Vg9RUJgMN3hsCka5eu1t4",authDomain:"counter-64673.firebaseapp.com",databaseURL:"https://counter-64673.firebaseio.com",projectId:"counter-64673",storageBucket:"counter-64673.appspot.com",messagingSenderId:"61000756567\n",appId:"1:61000756567:web:5d923c067f28d0ab8c6212"});var P=n(29);function M(e,t){return{id:Object(P.generate)(),text:t,authorId:e,createdAt:Date.now()}}var V=k.a.mark(q),Y=k.a.mark(F),B=k.a.mark($),H=k.a.mark(ee),J=k.a.mark(te),W=k.a.mark(ne),z={_:"EmptyUser"};function X(){return Object(h.b)((function(e){return K.a.auth().onAuthStateChanged((function(t){e(t||z)}))}))}function q(){var e,t;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=new K.a.auth.GoogleAuthProvider,t=K.a.auth(),n.next=4,Object(Q.b)([t,t.signInWithRedirect],e);case 4:case"end":return n.stop()}}),V)}function F(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=K.a.auth(),t.next=3,Object(Q.b)([e,e.signOut]);case 3:case"end":return t.stop()}}),Y)}function Z(e){return{id:e.uid,displayName:e.displayName}}function $(){var e,t,n;return k.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Q.b)(X);case 2:e=r.sent,r.prev=3;case 4:return r.next=7,Object(Q.g)(e);case 7:if((t=r.sent)===z){r.next=16;break}return n=Z(t),r.next=12,Object(Q.e)(O.USER_LOGIN_SUCCESS(n));case 12:return r.next=14,Object(Q.e)(O.NOTE_GET_ALL_REQUEST());case 14:r.next=18;break;case 16:return r.next=18,Object(Q.e)(O.USER_LOGOUT_SUCCESS());case 18:r.next=4;break;case 20:return r.prev=20,r.next=23,Object(Q.c)();case 23:if(!r.sent){r.next=25;break}e.close();case 25:return r.finish(20);case 26:case"end":return r.stop()}}),B,null,[[3,,20,26]])}function ee(e){var t,n,r,a,c;return k.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.text,o.next=3,Object(Q.f)(l.user);case 3:if(null!==(n=o.sent)){o.next=6;break}return o.abrupt("return");case 6:return r=M(n.id,t),a=K.a.firestore(),c=a.collection("notes"),o.next=11,Object(Q.b)([c,c.add],r);case 11:return o.next=13,Object(Q.e)(O.NOTE_ADD_SUCCESS(r));case 13:case"end":return o.stop()}}),H)}function te(e){var t,n,r,a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.f)(l.user);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return n=K.a.firestore(),r=n.collection("notes").where("authorId","==",t.id),e.next=9,Object(Q.b)([r,r.get]);case 9:return a=e.sent,c=re(a),e.next=13,Object(Q.e)(O.NOTE_GET_ALL_SUCCESS(c));case 13:case"end":return e.stop()}}),J)}function ne(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([Object(Q.h)(S.USER_LOGIN_REQUEST,q),Object(Q.h)(S.USER_LOGOUT_REQUEST,F),Object(Q.h)(S.NOTE_GET_ALL_REQUEST,te),Object(Q.h)(S.NOTE_ADD_REQUEST,ee),Object(Q.d)($)]);case 2:case"end":return e.stop()}}),W)}function re(e){var t=[];return e.forEach((function(e){return t.push(e.data()),t})),t}!function(){var e=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||y.c,t=Object(h.a)(),n=Object(y.d)(x,e(Object(y.a)(t)));return t.run(ne),n}(),t=document.getElementById("root");u.a.render(c.a.createElement(E.a,{store:e},c.a.createElement(C,null)),t)}()}},[[33,1,2]]]);
//# sourceMappingURL=main.b5ea735b.chunk.js.map